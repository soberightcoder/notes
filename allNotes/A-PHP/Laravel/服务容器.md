# 服务容器



服务容器得创建  和 使用；





####服务提供者 

1. 假设我们要建一个交易类，app/Trade/Sale.php

   ```php
   <?php
   namespace App\Trade;
   class Sale
   {
   public function exchange()
   {
       dd('交易成功啦!');
   }
   }
   ```

2. 在Providers目录下创建一个服务提供者 TradeServiceProvider

   ```php
   php artisan make:provider TradeServiceProvider
   ```

3. 然后在 TradeServiceProvider.php 的register方法中将我们的类进行绑定

   ```php
   /**
    * Register the application services.
    *
    * @return void
    */
   public function register()
   {
       //
       $this->app->bind('trade',function(){
           return new Sale();
       });
   }
   
    /**
        * Bootstrap the application services.
        *
        * @return void
        */
       public function boot()
       {
           // 启动的时候都会运行；
           // 启动的时候都会运行；
   //        echo "访问 我服务里面的对象了ceshicehi";
           // 这个服务容器得时候 先运行 register 然后在运行boot；
           $this->app->make(CeshiCeshi::class)->run();
       }
   
   ```

4. 接下来要去 config/app.php 下的providers数组中增加一行，

   ```php
   App\Providers\TradeServiceProvider::class,
   ```

5. 然后在我们的路由中写一个测试

   ```php
   Route::get('/',function (){
   $trade = app('trade');
   dd($trade->exchange());
   }
    // 也可以使用app()->make("trace")  === app('tradek');  都是返回key是trade容器里得对象；
   输出结果：交易成功啦!
   ```

6. 至此我们就将我们自己的类添加到IoC 容器中了

