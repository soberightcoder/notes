# 斐波那契数列



##递归及其优化方案；

```php
/**
 * 斐波那契数列
 * f(n) = f(n-1) + f(n-2) n>=2
 *        n n<2
 */

/**
 * @param $n
 * @return mixed
 * recursion递归的形似
 * 时间复杂度是O(2^n) 空间复杂度就是函数调用栈的大小；O(n)
 * 缺点：如果数据过多
 */
function fabonacciRecur($n){
    if($n < 2) return $n;
    if($n >= 2) return fabonacciRecur($n - 1) + fabonacciRecur($n - 2);
}
//echo fabonacciRecur(10);

/**
 * Class FabonacciMore
 * 递归的优化 加了缓存
 * 时间复杂度是O(n)
 * 空间复杂度是O(n)
 */
class FabonacciMore{
    protected $cache = [];
    public function main($n) {
       if(isset($this->cache[$n]))  return $this->cache[$n];
       if($n < 2) return $n;
       $mid = $this->main($n - 1) + $this->main($n - 2);
       $this->cache[$n] = $mid;
       return $mid;
    }
}
//$obj = new FabonacciMore();
//echo $obj->main(100);
/**
 * @param $n
 
 * 从下到上使用循环来
 *时间复杂度是O(n)  空间复杂度是O(1);
 */
function fabonacciFor($n){
    if($n < 2) return $n;
    $f0 = 0;
    $f1 = 1;
    $fn = 0;
    for($i=2;$i<=$n;$i++){
        $fn = $f0 + $f1;
        $f0 = $f1;
        $f1 = $fn;
    }
    return $fn;
}
```





### 链表反转

**递归法 这个 图像还是比较生动的；**



![递归.gif](斐波那契数列.assets/dacd1bf55dec5c8b38d0904f26e472e2024fc8bee4ea46e3aa676f340ba1eb9d-递归.gif)



````php
/**
 * Class ListRecReverse
 * 递归链表的反转
 * --递归
 * 链表的方法  ：  画图，寻找n和n-1之间的关系,终止条件；
 */
class ListRecReverse{
    function reverseList($head) {
        // 终止条件；
        if($head == null || $head->next == null) return $head;
        //$p 代表已经反序好的list
        $p = $this->reverseList($head->next);
        $head->next->next = $head;
        $head->next = null;
        return $p;
    }
}
//$obj = new ListRecReverse();
//var_dump($obj->reverseList($head));die;
````



**迭代法：**

![迭代.gif](斐波那契数列.assets/7d8712af4fbb870537607b1dd95d66c248eb178db4319919c32d9304ee85b602-迭代.gif)



````php
/**
 * Class ListForReverse
 * 数据的迭代；
 * 时间复杂度是O(n)
 */
class ListForReverse{
    public function reverseList($head) {
        $prev = null;
        $cur = $head;
        while($cur){
            $next = $cur->next;
            $cur->next = $prev;
            $prev = $cur;
            $cur = $next;
        }
        return $prev;
    }
}
````

