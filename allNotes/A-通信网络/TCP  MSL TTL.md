# TCP 三次握手和四次挥手详解；

>MSL  and TTL
>
>

---



## MSL 和TTL 的区别？

MSL（Maximum Segment Lifetime）和TTL（Time to Live）是两个不同的概念，在TCP协议和IP协议中有着不同的作用和计算方式。

**MSL是TCP协议中用来确定数据包在网络中允许存在的最长时间，它是基于TCP连接的结束过程和数据包在网络中的最长存活时间来确定的，而不是基于TTL来计算的。**

**TTL则是IP协议中用来限制数据包在网络中传输的最长时间或最大跳数**，它是在IP数据包中的一个字段，每经过一个路由器，TTL的值就会减一，当TTL的值减为0时，数据包会被丢弃。**TTL的作用是防止数据包在网络中无限循环，同时也能够限制数据包在网络中传输的范围。**

因此，MSL和TTL是两个不同层次、不同目的的概念，它们在网络通信中有着不同的作用和计算方式。

---



## MSL

>**这个值的设定是为了确保网络中的旧数据包不会影响到新的连接，同时也能够允许足够的时间来处理网络中的数据包。**

**MSL（Maximum Segment Lifetime）是指TCP协议中数据包在网络中允许存在的最长时间。**MSL的计算是基于TCP协议规范中的一些固定值和算法来确定的。

根据TCP协议规范，MSL的计算如下：

1. MSL的初始值是2分钟（120秒）。
2. 当TCP连接中的一方发送一个FIN（结束）标志时，该连接将进入TIME_WAIT状态，等待2倍MSL的时间（即240秒）。
3. 在TIME_WAIT状态下，TCP连接的另一方如果没有收到确认信息，会重新发送FIN，然后等待2倍MSL的时间。
4. 一旦经过2倍MSL的时间后，连接中的所有未确认的数据包都会被丢弃。

因此，MSL的计算是基于TCP连接的结束过程和数据包在网络中的最长存活时间来确定的。**这个值的设定是为了确保网络中的旧数据包不会影响到新的连接，同时也能够允许足够的时间来处理网络中的数据包。**

---

