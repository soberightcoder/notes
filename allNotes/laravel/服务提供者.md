# 服务提供者与IOC的区别？



>**怎么知晓类是怎么放在容器里面的，就是通过服务提供者来实现的把？??  想一下这个问题！！！思考一下这个问题；//todo** 

## 服务提供者 --- 本质就是把自己的服务（对象；） 注册到容器中； 注册的服务 其实就是register 方法，来注册服务或者对象；

>**所有的服务提供者的register 被调用之后，所有的服务提供者均注册后，boot方法才被调用；**
>
>**把自己的服务注册（bind）容器中去，方便给控制器进行依赖注入；服务提供者存在的意义！！！**
>
>**就是一个类需要依赖于另外一个类！！然后依赖于另外一个类的方式就是服务提供者！！！**
>
>**服务提供者的本质就是把自己的类实例化注册到服务容器中去；**

---



**内核启动操作中最重要的便是你应用的 服务提供者 了。所有应用下的服务提供者均配置到了 config/app.php 配置文件中的 providers 数组中。第一步，所有服务提供者的 register 方法会被调用，然后一旦所有服务提供者均注册后， boot 方法才被调用。**

服务提供者给予框架开启多种多样的组件，像数据库，队列，验证器，以及路由组件。只要被启动服务提供者就可支配框架的所有功能，所以服务提供者也是 Laravel 整个引导周期最重要组成部分。



**服务提供者是所有 Laravel 应用程序的引导中心。你的应用程序，以及通过服务器引导的 Laravel 核心服务都是通过服务提供器引导。你的应用程序可以是Redis 或者是Mysql，或者是Route**



----

## 代码的实现  -- 怎么把服务提供者注册到服务提供者；

````php
// code
//php artisan make:provider 
//config/app.php 里面会有服务提供者的配置；providers这个数组就代表着框架的服务能力；
//当你打开 Laravel 的 config/app.php 文件时，你会看到 providers 数组。数组中的内容是应用程序要加载的所有服务提供者的类。当然，其中有很多 「延迟」 提供者，他们并不会在每次请求的时候都加载，只有他们的服务实际被需要时才会加载。
//所有的服务提供者都会继承 Illuminate\Support\ServiceProvider 类。 大多服务提供者都包含一个 register 和一个 boot 方法。在 register 方法中， 你只需要将服务绑定到 服务容器。 而不要尝试在 register 方法中注册任何监听器，路由，或者其他任何功能
使用 Artisan 命令行工具，通过 make:provider 命令可以生成一个新的提供者:
php artisan make:provider Test1Provider
// 然后去app/config.php 来添加服务提供者；在服务容器启动的时候加载这个服务提供者；
    
// 执行服务提供者里面的register注册函数进行服务的注册；
<?php

namespace App\Providers;

use App\Services\Test;
use Illuminate\Support\ServiceProvider;
use PDO;
use SingleTest;

class TestProvider extends ServiceProvider
{
    /**
     * Register services.
     *
     * @return void
     */
    public function register()
    {
        //所有的服务提供者注册方法都会被执行；
        //注册的服务，可以选择延迟绑定，或者其他的注册方式；
        //$this->app 其实就是我们的容器实例；
         $this->app->bind(Test::class,function () {
            return new Test;
         });
        //单例的测试；
        $this->app->singleton(SingleTest::class,function() {
            return new SingleTest;
        });
    }

    /**
     * Bootstrap services.
     *
     * @return void
     */
    public function boot()
    {
        //所有的服务提供者均被注册之后，boot方法才会启动！！！
    }
}


````



## IOC容器/ 服务容器

>**服务容器就是给我们提供服务的**； **服务容器，保存服务的容器，服务提供者就是为容器提供服务的；服务是啥？ 服务就是一个对象！！！**  
>
>**IOC 容器其实就是一个数组；**
>
>**那么服务提供者是扮演一个什么的角色？为服务容器提供服务** 

---



**服务提供者，为控制器提供服务，所以叫服务控制者，实现服务提供者和控制器（服务的使用者）进行了解耦！！！**

**控制器需要外部的类为我提供服务最终服务是通过依赖注入的方式来实现（方法类的形参）；**



---

## 服务提供者和服务容器的关联

>**把自己的服务注册（bind）容器中去，方便给控制器进行依赖注入；**
>
>**注意：注入需要直到类信息，都是通过反射来实现的；**





----

## 服务提供者里面 register  和 boot 的用法和区别？//todo boot 可以做什么？



````php
````





----

## 怎么判断对象是否在容器内；

`````php
//可以判断是否从 容器内的服务；
if(app()->has(class_name)) {
echo 'success';
}
// 没有注册到容器里面 laravel 底层就会使用newinstalnceArgs这种方法；

// 为啥最好保证 服务处于容器里面；这样会简单一些；效率会高很多；
`````
