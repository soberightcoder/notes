# 关联和依赖   注入方式；

>关联和依赖注入；两种注入方式；去了解一下把；

---

依赖注入和关联注入在PHP中通常是指相同的概念，它们都是指在类的构造函数或方法中通过参数来注入依赖关系。依赖注入是一种设计模式，它允许通过构造函数、方法参数或者属性来注入依赖对象，以减少类之间的耦合性。而关联注入则是指通过关联关系来注入依赖对象，通常是通过类的属性来实现。

**因此，虽然在PHP中我们通常称之为依赖注入，但关联注入也是一个恰当的术语，因为它强调了依赖对象与类之间的关联关系。无论是依赖注入还是关联注入，它们都是为了实现松耦合的设计，提高代码的灵活性和可测试性。**

---

##关联注入

> **依赖的对象属于类的一部分；**
>
>**多个方法可以使用这个属性里面保存的对象；**
>
>**通常适用于必须依赖的对象；**
>
>**关联依赖实现在初始化（当然也可以使用setter 执行setter方法的时候确定依赖关系）的时候来确定依赖关系；如果你想改变依赖关系，那么需要重新初始化，或者执行setter方法！！！**
>
>**耦合性会比较强；**
>
>**组合的实现就是是关联注入！！！生成对象的时候注入；**

在PHP中，关联注入通常是通过类的属性来实现。这意味着你可以在类中定义一个属性，并在类的构造函数或其他方法中将依赖对象赋给这个属性。这样，类就可以通过这个属性来访问依赖对象。

以下是一个简单的示例，演示了如何在PHP中实现关联注入：

```php
CopyOpenclass SomeClass {
    private $dependency;

    public function __construct($dependency) {
        $this->dependency = $dependency;
    }

    public function doSomething() {
        // 使用注入的依赖对象
        $this->dependency->performTask();
    }
}

// 创建依赖对象
$dependency = new SomeDependency();

// 实例化类并进行关联注入
$object = new SomeClass($dependency);

// 调用方法
$object->doSomething();
```

在这个示例中，`SomeClass`类通过构造函数接收一个依赖对象，并将其赋给私有属性`$dependency`。这样就实现了关联注入，`SomeClass`类可以通过`$dependency`属性来访问依赖对象。

除了构造函数之外，你也可以通过其他方法来实现关联注入，比如通过setter方法来设置依赖对象的属性。这样的话，类的使用者可以在实例化类之后，通过调用setter方法来注入依赖对象。



---

## 依赖注入

> **依赖的类，并不属于本类的一部分；**
>
>**只能本方法可以使用；其他的方法使用还需要再次注入；**
>
>**比较适合那种依赖关系会发生变化的类；**
>
>**依赖注入是在方法调用的时候确定依赖关系；**
>
>**比起关联注入耦合性会弱一点；**
>
>**方法调用的时候注入；**

`````php
## 通过 形参 注入 通过形参注入，依赖小；一般依赖的是动态变化的对象；
	
Interface Iaction
{
    public function do();
}

class Eat implements 
{
    public function do() {
        echo "i can eat food";
    }
}
class XiaoMing 
{
    public function doing(Iaction $eat){
        $eat->do();
    }
}
$obj = new XiaoMing();
$obj->doing(new Eat);


`````





---

## 通过形参或者通过属性来进行注入的区别是啥？

>这个很重要，需要去学习一下！！！

通过属性进行注入和通过形参进行注入的主要区别在于注入的方式和灵活性。

通过属性进行注入是指在类中定义一个属性，并在类的构造函数或其他方法中将依赖对象赋给这个属性。这种方式使得依赖对象成为类的一部分，类可以通过属性直接访问依赖对象。**这种方式简单直接，但可能会增加类的耦合性。**

通过形参进行注入是指在类的构造函数或其他方法中通过参数来接收依赖对象。**这种方式使得依赖对象不是类的一部分，而是在类被实例化时传入的一个参数。**这种方式可以减少类的耦合性，使得类更加灵活，但在实例化类时需要显式地传入依赖对象。

因此，**通过属性进行注入通常更适合于那些类必须依赖某些对象（或者说所有的方法都要依赖于该对象；这个类的很多方法都依赖于该对象）的情况，而通过形参进行注入更适合于那些类的依赖关系可能会发生变化，或者需要在实例化时动态地传入依赖对象的情况。**选择哪种方式取决于具体的需求和设计考虑；



---

## <font color=red>总结： 动态依赖一定要用依赖注入不要用关联注入！！！</font>