

# 分表分库

> **只分库只分表，只分表不分库，既分库又分表；**
>
>**分表：单表数量非常的大，存储和查询性能遇到了瓶颈；把数据分到多表中，降低表的数据量，来提高查询速度**
>
>**分库：当你的读或者写的qps太高，导致数据库的连接不足； 通过增加数据库的实例，来提供更多的数据库连接 ；**
>
>**多少数量需要分表： 跟你表单条记录大小有关！！**
>
>

----



**分表通常会影响对数据的排序和分页操作。这是因为当数据分布在多个表中时，排序和分页操作需要跨表进行，这会增加复杂性并降低性能。在分表的情况下，数据库无法直接对整个数据集进行排序和分页，而是需要在每个表上执行排序和分页操作，然后将结果合并。这会导致性能下降，尤其是在大型数据集的情况下**。



---



##  基因法 和 倒排序

### 基因法：

> **订单id 和 userid 有相同的部分来做一个分表就可以了！！！**

**假如你需要根据userId和订单id去查询订单信息；那么可以使用userid的后几位，并且订单id里面也含有userid的信息，来做分表；**



### 倒排序；

 **再维护一个 某个字段  到 那个表和分区字段的映射关系表；**

但是效率：需要两次查询 并且  需要额外存储空间！！

---

