# 各种日志



##redo log  重做日志  innodb 特有的日志 

特点：物理日志，循环写；



WAL Write-Ahead Logging 预写式日记

先写日志 再写磁盘

当一条记录需要更新的时候，innodb会先把数据写再redo log 并更新到内存，这就算完成了。innodb会在适当（空闲）的时候，更新到磁盘去；更新到磁盘的方式就是 fsync



##binlog  归档日志  server 层实现的，所有的存储引擎都可以使用；

特点：逻辑日志；追加写；



Binlog有两种模式，statement 格式的话是记sql语句， row格式会记录行的内容，记两条，更新前和更新后都有。所以占用空间比较大

Crash-safe是崩溃恢复，就是原地满血复活；binlog恢复是制造一个影分身（副本）出来



1、首先数据库更新操作都是基于内存页，更新的时候不会直接更新磁盘，如果内存有存在就直接更新内存，如果内存没有存在就从磁盘读取到内存，在更新内存，并且写redo log，目的是为了更新效率更快，等空闲时间在将其redo log所做的改变更新到磁盘中，innodb_flush_log_at_trx_commit设置为1时，也可以防止服务出现异常重启，数据不会丢失

2、redo log两阶段提交，是为了保证redo log和binlog的一致性，如果redo log写入成功处于prepare阶段，写binlog失败，事务回滚，redo log会回滚到操作之前的状态
3、redo log也是写磁盘，写redo log是顺序写，update直接更新磁盘，需要找到数据，再对此数据进行更新，如果没有使用索引，数据量大会导致更新效率慢，不对的地方，望老师指点哦
作者回复: 很好👍🏿

##undo log  回滚日志  逻辑日志 sql语句 并不是物理日志‘



##slow query log  慢查询日志



##error log   错误日志；



## 







